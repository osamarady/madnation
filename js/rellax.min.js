!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Rellax=t()}(this,function(){var a=function(e,t){var c=Object.create(a.prototype),r=0,u=0,i=0,f=0,m=[],w=!0,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},s=window.transformProp||function(){var e=document.createElement("div");if(null===e.style.transform){var t,o=["Webkit","Moz","ms"];for(t in o)if(void 0!==e.style[o[t]+"Transform"])return o[t]+"Transform"}return"transform"}();c.options={speed:-2,center:!1,wrapper:null,round:!0,vertical:!0,horizontal:!1,callback:function(){}},t&&Object.keys(t).forEach(function(e){c.options[e]=t[e]}),e||(e=".rellax");var n="string"==typeof e?document.querySelectorAll(e):[e];if(!(0<n.length))throw Error("The elements you're trying to select don't exist.");if(c.elems=n,c.options.wrapper&&!c.options.wrapper.nodeType){if(!(n=document.querySelector(c.options.wrapper)))throw Error("The wrapper you're trying to use don't exist.");c.options.wrapper=n}var h=function(){for(var e=0;e<m.length;e++)c.elems[e].style.cssText=m[e].style;for(m=[],u=window.innerHeight,f=window.innerWidth,y(),e=0;e<c.elems.length;e++){var t=c.elems[e],o=t.getAttribute("data-rellax-percentage"),n=t.getAttribute("data-rellax-speed"),r=t.getAttribute("data-rellax-zindex")||0,i=c.options.wrapper?c.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=c.options.vertical&&(o||c.options.center)?i:0,l=c.options.horizontal&&(o||c.options.center)?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0;i=s+t.getBoundingClientRect().top;var a=t.clientHeight||t.offsetHeight||t.scrollHeight,d=l+t.getBoundingClientRect().left,p=t.clientWidth||t.offsetWidth||t.scrollWidth;s=o||(s-i+u)/(a+u),o=o||(l-d+f)/(p+f),c.options.center&&(s=o=.5),n=n||c.options.speed,o=g(o,s,n),s="",0<=(t=t.style.cssText).indexOf("transform")&&(s=t.indexOf("transform"),s=(l=(s=t.slice(s)).indexOf(";"))?" "+s.slice(11,l).replace(/\s/g,""):" "+s.slice(11).replace(/\s/g,"")),m.push({baseX:o.x,baseY:o.y,top:i,left:d,height:a,width:p,speed:n,style:t,transform:s,zindex:r})}w&&(window.addEventListener("resize",h),w=!1),x()},y=function(){var e=r,t=i;return r=c.options.wrapper?c.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,i=c.options.wrapper?c.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,!!(e!=r&&c.options.vertical||t!=i&&c.options.horizontal)},g=function(e,t,o){var n={};return e=100*o*(1-e),t=100*o*(1-t),n.x=c.options.round?Math.round(e):Math.round(100*e)/100,n.y=c.options.round?Math.round(t):Math.round(100*t)/100,n},l=function(){y()&&!1===w&&x(),o(l)},x=function(){for(var e,t=0;t<c.elems.length;t++){var o=(e=g((i-m[t].left+f)/(m[t].width+f),(r-m[t].top+u)/(m[t].height+u),m[t].speed)).y-m[t].baseY,n=e.x-m[t].baseX;c.elems[t].style[s]="translate3d("+(c.options.horizontal?n:"0")+"px,"+(c.options.vertical?o:"0")+"px,"+m[t].zindex+"px) "+m[t].transform}c.options.callback(e)};return c.destroy=function(){for(var e=0;e<c.elems.length;e++)c.elems[e].style.cssText=m[e].style;w||(window.removeEventListener("resize",h),w=!0)},h(),l(),c.refresh=h,c};return a});